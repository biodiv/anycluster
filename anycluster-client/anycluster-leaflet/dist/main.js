var e=require("anycluster-client"),r=require("leaflet");function t(e,r,t,a){Object.defineProperty(e,r,{get:t,set:a,enumerable:!0,configurable:!0})}t(module.exports,"ClusterMethod",(()=>$daa68199c6ecee0a$re_export$ClusterMethod)),t(module.exports,"AnyclusterLeaflet",(()=>s));const a={5:"rgba(100, 75, 80, 1)",10:"rgba(90, 50, 50, 1)",50:"rgba(100, 50, 31, 1)",100:"rgba(100, 65, 0, 1)",1e3:"rgba(255, 69, 0, 1)",1e4:"rgba(255, 0 , 0, 1)"},o={5:"pink",10:"lightcoral",50:"coral",100:"orange",1e3:"orangered",1e4:"red"};class s extends e.AnyclusterClient{constructor(e,r,t,s){super(e,r,t,s),this.currentZoom=this.getZoom(),this.gridFillColors=s.gridFillColors?s.gridFillColors:a,this.gridStrokeColors=s.gridStrokeColors?s.gridStrokeColors:o}removeArea(){this.map.hasOwnProperty("areaLayer")&&this.map.areaLayer.clearLayers()}addArea(e){this.map.hasOwnProperty("areaLayer")||this.createAreaLayer(),r.geoJSON(e,{style:{color:"red"}}).addTo(this.map.areaLayer)}createClusterLayers(){const e=r.layerGroup().addTo(this.map);this.map.kmeansLayer=e;const t=r.layerGroup().addTo(this.map);this.map.gridClusterLayer=t}createAreaLayer(){const e=r.layerGroup().addTo(this.map);this.map.areaLayer=e}getMarkerIcon(e){const t=this.selectPinIcon(e);return r.icon({iconUrl:t.url,iconSize:t.size,iconAnchor:t.anchor,popupAnchor:t.popupAnchor})}drawMarker(e){const t=this.getMarkerIcon(e),a=r.latLng(e.center.y,e.center.x),o={icon:t};let s=r.marker(a,o);s=this.setMarkerProps(s,e),this.addMarkerClickListener(s),s.addTo(this.map.kmeansLayer),this.markerList.push(s)}drawCell(e){const t=e.count;if(1==t)this.drawMarker(e);else{const o=r.latLng(e.center.y,e.center.x),s={type:"Feature",count:t,geometry:e.geojson,properties:{count:t}},i=this.roundMarkerCount(t),n=a[i],l=r.geoJSON(s,{style:{color:n,stroke:!0}});l.latitude=o.lat,l.longitude=o.lng,l.x=o.lng,l.y=o.lat,l.count=t,l.geojson=s,this.addMarkerClickListener(l),l.addTo(this.map.gridClusterLayer)}}removeAllMarkers(){this.map.kmeansLayer.clearLayers(),this.map.hasOwnProperty("gridClusterLayer")&&this.map.gridClusterLayer.clearLayers(),this.markerList.length=0}addMapEventListeners(){this.map.addEventListener("moveend",(e=>this.getClusters())),this.map.addEventListener("zoomend",(e=>this.removeAllMarkers()))}getViewport(){const e=this.map.getBounds();if(e.isValid()){return{left:e.getSouthWest().wrap().lng,top:e.getNorthEast().wrap().lat,right:e.getNorthEast().wrap().lng,bottom:e.getSouthWest().wrap().lat}}throw new Error("invalid viewport")}getZoom(){return this.map.getZoom()}setZoom(e){this.map.setZoom(e)}setMap(e,t,a){const o=r.latLng(t,e);this.map.setView(o,a)}addMarkerClickListener(e){this.getZoom()>=13||1==e.count?e.on("click",(r=>{this.onMarkerFinalClick(e)})):e.on("click",(r=>{this.markerClickFunction(e.x,e.y)}))}}
//# sourceMappingURL=main.js.map
